import{c as Z,n as L,t as ae,h as ue,e as le,r as Ye,d as G,u as dt,a as u,v as K,I as de,w as te,av as Ve,aw as Pe,M as ft,ax as ht,ay as vt,a0 as gt,m as p,U as ne,Q as me,q as O,R as Le,az as bt,b as R,f as Te,F as Ze,k as U,A as Y,D as Oe,aA as We,aB as mt,aC as yt,p as be,K as Me,aD as xt,aE as kt,a6 as $e,a7 as he,a4 as Ct,$ as _t,i as wt,j as St,o as Ge,aF as Ne,W as Xe,s as Je,C as ze,aG as De,a3 as ee,aH as It,N as _e,V as Qe,aI as Tt,E as $t,aJ as Bt,aK as He,_ as Be,J as Rt,aL as At,x as pe,y as et,G as Et,O as Vt,aM as Pt,a9 as tt,af as nt,aa as H,ab as J,aN as at,ae as Re,H as ce,al as fe,aj as Lt,aq as Ae,ak as Ee,ag as Ot}from"./index.e03d35ab.js";import{S as Mt,a as Nt}from"./index.e84fd7f4.js";import{u as lt}from"./city.74c1a1a5.js";import{a as re,b as zt,o as Dt,u as Ft}from"./index.9f046415.js";const[Wt,oe]=Z("cell"),it={icon:String,size:String,title:L,value:L,label:L,center:Boolean,isLink:Boolean,border:ae,required:Boolean,iconPrefix:String,valueClass:ue,labelClass:ue,titleClass:ue,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Ht=le({},it,Ye);var jt=G({name:Wt,props:Ht,setup(e,{slots:n}){const a=dt(),c=()=>{if(n.label||K(e.label))return u("div",{class:[oe("label"),e.labelClass]},[n.label?n.label():e.label])},l=()=>{if(n.title||K(e.title))return u("div",{class:[oe("title"),e.titleClass],style:e.titleStyle},[n.title?n.title():u("span",null,[e.title]),c()])},i=()=>{const o=n.value||n.default;if(o||K(e.value)){const k=n.title||K(e.title);return u("div",{class:[oe("value",{alone:!k}),e.valueClass]},[o?o():u("span",null,[e.value])])}},r=()=>{if(n.icon)return n.icon();if(e.icon)return u(de,{name:e.icon,class:oe("left-icon"),classPrefix:e.iconPrefix},null)},v=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const o=e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return u(de,{name:o,class:oe("right-icon")},null)}};return()=>{var o,f;const{size:k,center:b,border:_,isLink:d,required:$}=e,g=(o=e.clickable)!=null?o:d,T={center:b,required:$,clickable:g,borderless:!_};return k&&(T[k]=!!k),u("div",{class:oe(T),role:g?"button":void 0,tabindex:g?0:void 0,onClick:a},[r(),l(),i(),v(),(f=n.extra)==null?void 0:f.call(n)])}}});const ot=te(jt);function Kt(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function qt(e,n){return!(n.required&&Kt(e)||n.pattern&&!n.pattern.test(String(e)))}function Ut(e,n){return new Promise(a=>{const c=n.validator(e,n);if(ht(c)){c.then(a);return}a(c)})}function je(e,n){const{message:a}=n;return vt(a)?a(e,n):a||""}function Yt({target:e}){e.composing=!0}function Ke({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Zt(e,n){const a=Ve();e.style.height="auto";let c=e.scrollHeight;if(ft(n)){const{maxHeight:l,minHeight:i}=n;l!==void 0&&(c=Math.min(c,l)),i!==void 0&&(c=Math.max(c,i))}c&&(e.style.height=`${c}px`,Pe(a))}function Gt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function we(e){return[...e].length}function Xt(e,n){return[...e].slice(0,n).join("")}let Jt=0;function ye(){const e=gt(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++Jt}`}const[Qt,W]=Z("field"),Fe={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:L,formatter:Function,clearIcon:p("clear"),modelValue:ne(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:p("focus"),formatTrigger:p("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},pt=le({},it,Fe,{rows:L,type:p("text"),rules:Array,autosize:[Boolean,Object],labelWidth:L,labelClass:ue,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var en=G({name:Qt,props:pt,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:n,slots:a}){const c=ye(),l=me({status:"unvalidated",focused:!1,validateMessage:""}),i=O(),r=O(),{parent:v}=Le(bt),o=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if(K(e[t]))return e[t];if(v&&K(v.props[t]))return v.props[t]},k=R(()=>{const t=f("readonly");if(e.clearable&&!t){const m=o()!=="",C=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return m&&C}return!1}),b=R(()=>r.value&&a.input?r.value():e.modelValue),_=t=>t.reduce((m,C)=>m.then(()=>{if(l.status==="failed")return;let{value:V}=b;if(C.formatter&&(V=C.formatter(V,C)),!qt(V,C)){l.status="failed",l.validateMessage=je(V,C);return}if(C.validator)return Ut(V,C).then(q=>{q&&typeof q=="string"?(l.status="failed",l.validateMessage=q):q===!1&&(l.status="failed",l.validateMessage=je(V,C))})}),Promise.resolve()),d=()=>{l.status="unvalidated",l.validateMessage=""},$=()=>n("end-validate",{status:l.status}),g=(t=e.rules)=>new Promise(m=>{d(),t?(n("start-validate"),_(t).then(()=>{l.status==="failed"?(m({name:e.name,message:l.validateMessage}),$()):(l.status="passed",m(),$())})):m()}),T=t=>{if(v&&e.rules){const{validateTrigger:m}=v.props,C=We(m).includes(t),V=e.rules.filter(q=>q.trigger?We(q.trigger).includes(t):C);V.length&&g(V)}},M=t=>{const{maxlength:m}=e;if(K(m)&&we(t)>m){const C=o();return C&&we(C)===+m?C:Xt(t,+m)}return t},E=(t,m="onChange")=>{if(t=M(t),e.type==="number"||e.type==="digit"){const C=e.type==="number";t=mt(t,C,C)}e.formatter&&m===e.formatTrigger&&(t=e.formatter(t)),i.value&&i.value.value!==t&&(i.value.value=t),t!==e.modelValue&&n("update:modelValue",t)},Q=t=>{t.target.composing||E(t.target.value)},z=()=>{var t;return(t=i.value)==null?void 0:t.blur()},x=()=>{var t;return(t=i.value)==null?void 0:t.focus()},P=()=>{const t=i.value;e.type==="textarea"&&e.autosize&&t&&Zt(t,e.autosize)},y=t=>{l.focused=!0,n("focus",t),Y(P),f("readonly")&&z()},S=t=>{f("readonly")||(l.focused=!1,E(o(),"onBlur"),n("blur",t),T("onBlur"),Y(P),kt())},I=t=>n("click-input",t),B=t=>n("click-left-icon",t),A=t=>n("click-right-icon",t),D=t=>{be(t),n("update:modelValue",""),n("clear",t)},j=R(()=>{if(typeof e.error=="boolean")return e.error;if(v&&v.props.showError&&l.status==="failed")return!0}),F=R(()=>{const t=f("labelWidth");if(t)return{width:Te(t)}}),N=t=>{t.keyCode===13&&(!(v&&v.props.submitOnEnter)&&e.type!=="textarea"&&be(t),e.type==="search"&&z()),n("keypress",t)},ie=()=>e.id||`${c}-input`,X=()=>l.status,xe=()=>{const t=W("control",[f("inputAlign"),{error:j.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return u("div",{class:t,onClick:I},[a.input()]);const m={id:ie(),ref:i,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${c}-label`:void 0,onBlur:S,onFocus:y,onInput:Q,onClick:I,onChange:Ke,onKeypress:N,onCompositionend:Ke,onCompositionstart:Yt};return e.type==="textarea"?u("textarea",m,null):u("input",Me(Gt(e.type),m),null)},ve=()=>{const t=a["left-icon"];if(e.leftIcon||t)return u("div",{class:W("left-icon"),onClick:B},[t?t():u(de,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ke=()=>{const t=a["right-icon"];if(e.rightIcon||t)return u("div",{class:W("right-icon"),onClick:A},[t?t():u(de,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ce=()=>{if(e.showWordLimit&&e.maxlength){const t=we(o());return u("div",{class:W("word-limit")},[u("span",{class:W("word-num")},[t]),xt("/"),e.maxlength])}},s=()=>{if(v&&v.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const m=a["error-message"],C=f("errorMessageAlign");return u("div",{class:W("error-message",C)},[m?m({message:t}):t])}},h=()=>{const t=f("colon")?":":"";if(a.label)return[a.label(),t];if(e.label)return u("label",{id:`${c}-label`,for:ie()},[e.label+t])},w=()=>[u("div",{class:W("body")},[xe(),k.value&&u(de,{name:e.clearIcon,class:W("clear"),onTouchstart:D},null),ke(),a.button&&u("div",{class:W("button")},[a.button()])]),Ce(),s()];return re({blur:z,focus:x,validate:g,formValue:b,resetValidation:d,getValidationStatus:X}),Ze(yt,{customValue:r,resetValidation:d,validateWithTrigger:T}),U(()=>e.modelValue,()=>{E(o()),d(),T("onChange"),Y(P)}),Oe(()=>{E(o(),e.formatTrigger),Y(P)}),()=>{const t=f("disabled"),m=f("labelAlign"),C=h(),V=ve();return u(ot,{size:e.size,icon:e.leftIcon,class:W({error:j.value,disabled:t,[`label-${m}`]:m}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:F.value,valueClass:W("value"),titleClass:[W("label",[m,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:V?()=>V:null,title:C?()=>C:null,value:w,extra:a.extra})}}});const tn=te(en);function nn(e,n,a){let c=0;const l=e.scrollLeft,i=a===0?1:Math.round(a*1e3/16);function r(){e.scrollLeft+=(n-l)/i,++c<i&&$e(r)}r()}function an(e,n,a,c){let l=he(e);const i=l<n,r=a===0?1:Math.round(a*1e3/16),v=(n-l)/r;function o(){l+=v,(i&&l>n||!i&&l<n)&&(l=n),Ct(e,l),i&&l<n||!i&&l>n?$e(o):c&&$e(c)}o()}function ln(e,n){if(!_t||!window.IntersectionObserver)return;const a=new IntersectionObserver(i=>{n(i[0].intersectionRatio>0)},{root:document.body}),c=()=>{e.value&&a.observe(e.value)},l=()=>{e.value&&a.unobserve(e.value)};wt(l),St(l),Ge(c)}const[on,cn]=Z("sticky"),rn={zIndex:L,position:p("top"),container:Object,offsetTop:ne(0),offsetBottom:ne(0)};var sn=G({name:on,props:rn,emits:["scroll","change"],setup(e,{emit:n,slots:a}){const c=O(),l=Ne(c),i=me({fixed:!1,width:0,height:0,transform:0}),r=R(()=>Xe(e.position==="top"?e.offsetTop:e.offsetBottom)),v=R(()=>{const{fixed:b,height:_,width:d}=i;if(b)return{width:`${d}px`,height:`${_}px`}}),o=R(()=>{if(!i.fixed)return;const b=le(Je(e.zIndex),{width:`${i.width}px`,height:`${i.height}px`,[e.position]:`${r.value}px`});return i.transform&&(b.transform=`translate3d(0, ${i.transform}px, 0)`),b}),f=b=>n("scroll",{scrollTop:b,isFixed:i.fixed}),k=()=>{if(!c.value||De(c))return;const{container:b,position:_}=e,d=ee(c),$=he(window);if(i.width=d.width,i.height=d.height,_==="top")if(b){const g=ee(b),T=g.bottom-r.value-i.height;i.fixed=r.value>d.top&&g.bottom>0,i.transform=T<0?T:0}else i.fixed=r.value>d.top;else{const{clientHeight:g}=document.documentElement;if(b){const T=ee(b),M=g-T.top-r.value-i.height;i.fixed=g-r.value<d.bottom&&g>T.top,i.transform=M<0?-M:0}else i.fixed=g-r.value<d.bottom}f($)};return U(()=>i.fixed,b=>n("change",b)),ze("scroll",k,{target:l}),ln(c,k),()=>{var b;return u("div",{ref:c,style:v.value},[u("div",{class:cn({fixed:i.fixed}),style:o.value},[(b=a.default)==null?void 0:b.call(a)])])}}});const un=te(sn),[dn,qe]=Z("tab");var fn=G({name:dn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:L,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:ae},setup(e,{slots:n}){const a=R(()=>{const l={},{type:i,color:r,disabled:v,isActive:o,activeColor:f,inactiveColor:k}=e;r&&i==="card"&&(l.borderColor=r,v||(o?l.backgroundColor=r:l.color=r));const _=o?f:k;return _&&(l.color=_),l}),c=()=>{const l=u("span",{class:qe("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||K(e.badge)&&e.badge!==""?u(It,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[l]}):l};return()=>u("div",{id:e.id,role:"tab",class:[qe([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[c()])}});const[hn,Ue]=Z("tabs");var vn=G({name:hn,props:{count:_e(Number),inited:Boolean,animated:Boolean,duration:_e(L),swipeable:Boolean,lazyRender:Boolean,currentIndex:_e(Number)},emits:["change"],setup(e,{emit:n,slots:a}){const c=O(),l=v=>n("change",v),i=()=>{var v;const o=(v=a.default)==null?void 0:v.call(a);return e.animated||e.swipeable?u(Mt,{ref:c,loop:!1,class:Ue("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:l},{default:()=>[o]}):o},r=v=>{const o=c.value;o&&o.state.active!==v&&o.swipeTo(v,{immediate:!e.inited})};return U(()=>e.currentIndex,r),Oe(()=>{r(e.currentIndex)}),()=>u("div",{class:Ue("content",{animated:e.animated||e.swipeable})},[i()])}});const[ct,ge]=Z("tabs"),gn={type:p("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:ne(0),duration:ne(.3),animated:Boolean,ellipsis:ae,swipeable:Boolean,scrollspy:Boolean,offsetTop:ne(0),background:String,lazyRender:ae,lineWidth:L,lineHeight:L,beforeChange:Function,swipeThreshold:ne(5),titleActiveColor:String,titleInactiveColor:String},rt=Symbol(ct);var bn=G({name:ct,props:gn,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:n,slots:a}){let c,l,i;const r=O(),v=O(),o=O(),f=ye(),k=Ne(r),[b,_]=zt(),{children:d,linkChildren:$}=Qe(rt),g=me({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=R(()=>d.length>e.swipeThreshold||!e.ellipsis||e.shrink),M=R(()=>({borderColor:e.color,background:e.background})),E=(s,h)=>{var w;return(w=s.name)!=null?w:h},Q=R(()=>{const s=d[g.currentIndex];if(s)return E(s,g.currentIndex)}),z=R(()=>Xe(e.offsetTop)),x=R(()=>e.sticky?z.value+c:0),P=s=>{const h=v.value,w=b.value;if(!T.value||!h||!w||!w[g.currentIndex])return;const t=w[g.currentIndex].$el,m=t.offsetLeft-(h.offsetWidth-t.offsetWidth)/2;nn(h,m,s?0:+e.duration)},y=()=>{const s=g.inited;Y(()=>{const h=b.value;if(!h||!h[g.currentIndex]||e.type!=="line"||De(r.value))return;const w=h[g.currentIndex].$el,{lineWidth:t,lineHeight:m}=e,C=w.offsetLeft+w.offsetWidth/2,V={width:Te(t),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(s&&(V.transitionDuration=`${e.duration}s`),K(m)){const q=Te(m);V.height=q,V.borderRadius=q}g.lineStyle=V})},S=s=>{const h=s<g.currentIndex?-1:1;for(;s>=0&&s<d.length;){if(!d[s].disabled)return s;s+=h}},I=s=>{const h=S(s);if(!K(h))return;const w=d[h],t=E(w,h),m=g.currentIndex!==null;g.currentIndex=h,t!==e.active&&(n("update:active",t),m&&n("change",t,w.title))},B=s=>{const h=d.find((t,m)=>E(t,m)===s),w=h?d.indexOf(h):0;I(w)},A=(s=!1)=>{if(e.scrollspy){const h=d[g.currentIndex].$el;if(h&&k.value){const w=He(h,k.value)-x.value;l=!0,an(k.value,w,s?0:+e.duration,()=>{l=!1})}}},D=(s,h,w)=>{const{title:t,disabled:m}=d[h],C=E(d[h],h);m?n("disabled",C,t):(Rt(e.beforeChange,{args:[C],done:()=>{I(h),A()}}),n("click",C,t),At(s)),n("click-tab",{name:C,title:t,event:w,disabled:m})},j=s=>{i=s.isFixed,n("scroll",s)},F=s=>{Y(()=>{B(s),A(!0)})},N=()=>{for(let s=0;s<d.length;s++){const{top:h}=ee(d[s].$el);if(h>x.value)return s===0?0:s-1}return d.length-1},ie=()=>{if(e.scrollspy&&!l){const s=N();I(s)}},X=()=>d.map((s,h)=>u(fn,Me({key:s.id,id:`${f}-${h}`,ref:_(h),type:e.type,color:e.color,style:s.titleStyle,class:s.titleClass,shrink:e.shrink,isActive:h===g.currentIndex,controls:s.id,scrollable:T.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:w=>D(s,h,w)},Be(s,["dot","badge","title","disabled","showZeroBadge"])),{title:s.$slots.title})),xe=()=>{if(e.type==="line"&&d.length)return u("div",{class:ge("line"),style:g.lineStyle},null)},ve=()=>{var s,h;const{type:w,border:t}=e;return u("div",{ref:o,class:[ge("wrap"),{[Bt]:w==="line"&&t}]},[u("div",{ref:v,role:"tablist",class:ge("nav",[w,{shrink:e.shrink,complete:T.value}]),style:M.value,"aria-orientation":"horizontal"},[(s=a["nav-left"])==null?void 0:s.call(a),X(),xe(),(h=a["nav-right"])==null?void 0:h.call(a)])])};U([()=>e.color,Tt],y),U(()=>e.active,s=>{s!==Q.value&&B(s)}),U(()=>d.length,()=>{g.inited&&(B(e.active),y(),Y(()=>{P(!0)}))}),U(()=>g.currentIndex,()=>{P(),y(),i&&!e.scrollspy&&Pe(Math.ceil(He(r.value)-z.value))});const ke=()=>{B(e.active),Y(()=>{g.inited=!0,o.value&&(c=ee(o.value).height),P(!0)})},Ce=(s,h)=>n("rendered",s,h);return re({resize:y,scrollTo:F}),$t(y),Dt(y),Ge(ke),ze("scroll",ie,{target:k}),$({id:f,props:e,setLine:y,onRendered:Ce,currentName:Q,scrollIntoView:P}),()=>{var s;return u("div",{ref:r,class:ge([e.type])},[e.sticky?u(un,{container:r.value,offsetTop:z.value,onScroll:j},{default:()=>{var h;return[ve(),(h=a["nav-bottom"])==null?void 0:h.call(a)]}}):[ve(),(s=a["nav-bottom"])==null?void 0:s.call(a)],u(vn,{count:d.length,inited:g.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:g.currentIndex,onChange:I},{default:()=>{var h;return[(h=a.default)==null?void 0:h.call(a)]}})])}}});const mn=Symbol(),[yn,Se]=Z("tab"),xn=le({},Ye,{dot:Boolean,name:L,badge:L,title:String,disabled:Boolean,titleClass:ue,titleStyle:[String,Object],showZeroBadge:ae});var kn=G({name:yn,props:xn,setup(e,{slots:n}){const a=ye(),c=O(!1),{parent:l,index:i}=Le(rt);if(!l)return;const r=()=>{var f;return(f=e.name)!=null?f:i.value},v=()=>{c.value=!0,l.props.lazyRender&&Y(()=>{l.onRendered(r(),e.title)})},o=R(()=>{const f=r()===l.currentName.value;return f&&!c.value&&v(),f});return U(()=>e.title,()=>{l.setLine(),l.scrollIntoView()}),Ze(mn,o),()=>{var f;const k=`${l.id}-${i.value}`,{animated:b,swipeable:_,scrollspy:d,lazyRender:$}=l.props;if(!n.default&&!b)return;const g=d||o.value;if(b||_)return u(Nt,{id:a,role:"tabpanel",class:Se("panel-wrapper",{inactive:!o.value}),tabindex:o.value?0:-1,"aria-hidden":!o.value,"aria-labelledby":k},{default:()=>{var E;return[u("div",{class:Se("panel")},[(E=n.default)==null?void 0:E.call(n)])]}});const M=c.value||d||!$?(f=n.default)==null?void 0:f.call(n):null;return re({id:a}),pe(u("div",{id:a,role:"tabpanel",class:Se("panel"),tabindex:g?0:-1,"aria-labelledby":k},[M]),[[et,g]])}}});const Cn=te(kn),_n=te(bn);function wn(){const e="A".charCodeAt(0);return Array(26).fill("").map((a,c)=>String.fromCharCode(e+c))}const[st,Ie]=Z("index-bar"),Sn={sticky:ae,zIndex:L,teleport:[String,Object],highlightColor:String,stickyOffsetTop:Vt(0),indexList:{type:Array,default:wn}},ut=Symbol(st);var In=G({name:st,props:Sn,emits:["select","change"],setup(e,{emit:n,slots:a}){const c=O(),l=O(""),i=Ft(),r=Ne(c),{children:v,linkChildren:o}=Qe(ut);let f;o({props:e});const k=R(()=>{if(K(e.zIndex))return{zIndex:+e.zIndex+1}}),b=R(()=>{if(e.highlightColor)return{color:e.highlightColor}}),_=(y,S)=>{for(let I=v.length-1;I>=0;I--){const B=I>0?S[I-1].height:0,A=e.sticky?B+e.stickyOffsetTop:0;if(y+A>=S[I].top)return I}return-1},d=y=>v.find(S=>String(S.index)===y),$=()=>{if(De(c))return;const{sticky:y,indexList:S}=e,I=he(r.value),B=ee(r),A=v.map(j=>j.getRect(r.value,B));let D=-1;if(f){const j=d(f);if(j){const F=j.getRect(r.value,B);D=_(F.top,A)}}else D=_(I,A);l.value=S[D],y&&v.forEach((j,F)=>{const{state:N,$el:ie}=j;if(F===D||F===D-1){const X=ie.getBoundingClientRect();N.left=X.left,N.width=X.width}else N.left=null,N.width=null;if(F===D)N.active=!0,N.top=Math.max(e.stickyOffsetTop,A[F].top-I)+B.top;else if(F===D-1&&f===""){const X=A[D].top-I;N.active=X>0,N.top=X+B.top-A[F].height}else N.active=!1}),f=""},g=()=>{Y($)};ze("scroll",$,{target:r}),Oe(g),U(()=>e.indexList,g),U(l,y=>{y&&n("change",y)});const T=()=>e.indexList.map(y=>{const S=y===l.value;return u("span",{class:Ie("index",{active:S}),style:S?b.value:void 0,"data-index":y},[y])}),M=y=>{f=String(y);const S=d(f);if(S){const I=he(r.value),B=ee(r),{offsetHeight:A}=document.documentElement;if(I===A-B.height){$();return}S.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&Pe(Ve()-e.stickyOffsetTop),n("select",S.index)}},E=y=>{const{index:S}=y.dataset;S&&M(S)},Q=y=>{E(y.target)};let z;const x=y=>{if(i.move(y),i.isVertical()){be(y);const{clientX:S,clientY:I}=y.touches[0],B=document.elementFromPoint(S,I);if(B){const{index:A}=B.dataset;A&&z!==A&&(z=A,E(B))}}},P=()=>u("div",{class:Ie("sidebar"),style:k.value,onClick:Q,onTouchstart:i.start,onTouchmove:x},[T()]);return re({scrollTo:M}),()=>{var y;return u("div",{ref:c,class:Ie()},[e.teleport?u(Et,{to:e.teleport},{default:()=>[P()]}):P(),(y=a.default)==null?void 0:y.call(a)])}}});const[Tn,$n]=Z("index-anchor"),Bn={index:L};var Rn=G({name:Tn,props:Bn,setup(e,{slots:n}){const a=me({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),c=O(),{parent:l}=Le(ut);if(!l)return;const i=()=>a.active&&l.props.sticky,r=R(()=>{const{zIndex:o,highlightColor:f}=l.props;if(i())return le(Je(o),{left:a.left?`${a.left}px`:void 0,width:a.width?`${a.width}px`:void 0,transform:a.top?`translate3d(0, ${a.top}px, 0)`:void 0,color:f})});return re({state:a,getRect:(o,f)=>{const k=ee(c);return a.rect.height=k.height,o===window||o===document.body?a.rect.top=k.top+Ve():a.rect.top=k.top+he(o)-f.top,a.rect}}),()=>{const o=i();return u("div",{ref:c,style:{height:o?`${a.rect.height}px`:void 0}},[u("div",{style:r.value,class:[$n({sticky:o}),{[Pt]:o}]},[n.default?n.default():e.index])])}}});const An=te(Rn),En=te(In),[Vn,se,Pn]=Z("search"),Ln=le({},Fe,{label:String,shape:p("square"),leftIcon:p("search"),clearable:ae,actionText:String,background:String,showAction:Boolean});var On=G({name:Vn,props:Ln,emits:["blur","focus","clear","search","cancel","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:c}){const l=ye(),i=O(),r=()=>{a.action||(n("update:modelValue",""),n("cancel"))},v=x=>{x.keyCode===13&&(be(x),n("search",e.modelValue))},o=()=>e.id||`${l}-input`,f=()=>{if(a.label||e.label)return u("label",{class:se("label"),for:o()},[a.label?a.label():e.label])},k=()=>{if(e.showAction){const x=e.actionText||Pn("cancel");return u("div",{class:se("action"),role:"button",tabindex:0,onClick:r},[a.action?a.action():x])}},b=()=>{var x;return(x=i.value)==null?void 0:x.blur()},_=()=>{var x;return(x=i.value)==null?void 0:x.focus()},d=x=>n("blur",x),$=x=>n("focus",x),g=x=>n("clear",x),T=x=>n("click-input",x),M=x=>n("click-left-icon",x),E=x=>n("click-right-icon",x),Q=Object.keys(Fe),z=()=>{const x=le({},c,Be(e,Q),{id:o()}),P=y=>n("update:modelValue",y);return u(tn,Me({ref:i,type:"search",class:se("field"),border:!1,onBlur:d,onFocus:$,onClear:g,onKeypress:v,"onClick-input":T,"onClick-left-icon":M,"onClick-right-icon":E,"onUpdate:modelValue":P},x),Be(a,["left-icon","right-icon"]))};return re({focus:_,blur:b}),()=>{var x;return u("div",{class:se({"show-action":e.showAction}),style:{background:e.background}},[(x=a.left)==null?void 0:x.call(a),u("div",{class:se("content",e.shape)},[f(),z()]),k()])}}});const Mn=te(On);const Nn={class:"city-group"},zn={class:"list"},Dn=["onClick"],Fn={__name:"city-group",props:{groupData:{type:Object,default:()=>({})}},setup(e){const n=e,a=R(()=>{const r=n.groupData.cities.map(v=>v.group);return r.unshift("#"),r}),c=nt(),l=lt(),i=r=>{l.currentCity=r,c.back()};return(r,v)=>{const o=An,f=ot,k=En;return H(),J("div",Nn,[u(k,{sticky:!1,"index-list":Ee(a)},{default:at(()=>[u(o,{index:"\u70ED\u95E8"}),Re("div",zn,[(H(!0),J(ce,null,fe(e.groupData.hotCities,(b,_)=>(H(),J("div",{class:"city",onClick:d=>i(b)},Lt(b.cityName),9,Dn))),256))]),(H(!0),J(ce,null,fe(e.groupData.cities,(b,_)=>(H(),J(ce,{key:_},[u(o,{index:b.group},null,8,["index"]),(H(!0),J(ce,null,fe(b.cities,(d,$)=>(H(),Ae(f,{key:$,title:d.cityName,onClick:g=>i(d)},null,8,["title","onClick"]))),128))],64))),128))]),_:1},8,["index-list"])])}}},Wn=tt(Fn,[["__scopeId","data-v-410d8964"]]);const Hn={class:"city top-page"},jn={class:"top"},Kn={class:"content"},qn={__name:"city",setup(e){const n=nt(),a=O(""),c=()=>{n.back()},l=O(),i=lt();i.fetchAllCitiesData();const{allCities:r}=Ot(i);return R(()=>r.value[l.value]),(v,o)=>{const f=Mn,k=Cn,b=_n;return H(),J("div",Hn,[Re("div",jn,[u(f,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=_=>a.value=_),placeholder:"\u57CE\u5E02/\u533A\u57DF/\u4F4D\u7F6E",shape:"round","show-action":"",onCancel:c},null,8,["modelValue"]),u(b,{active:l.value,"onUpdate:active":o[1]||(o[1]=_=>l.value=_),color:"#ff9854","line-height":"3"},{default:at(()=>[(H(!0),J(ce,null,fe(Ee(r),(_,d,$)=>(H(),Ae(k,{key:d,title:_.title,name:d},null,8,["title","name"]))),128))]),_:1},8,["active"])]),Re("div",Kn,[(H(!0),J(ce,null,fe(Ee(r),(_,d,$)=>pe((H(),Ae(Wn,{"group-data":_},null,8,["group-data"])),[[et,l.value===d]])),256))])])}}},Xn=tt(qn,[["__scopeId","data-v-e870dc63"]]);export{Xn as default};
